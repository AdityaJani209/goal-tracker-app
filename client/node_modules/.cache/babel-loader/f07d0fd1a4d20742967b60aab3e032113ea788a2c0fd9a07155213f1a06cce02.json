{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ADITYA\\\\Desktop\\\\React\\\\goal-tracker-app\\\\client\\\\src\\\\pages\\\\Goals.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { DragDropContext, Droppable, Draggable } from '@hello-pangea/dnd';\nimport { useSearchParams } from 'react-router-dom';\nimport { useGoals } from '../contexts/GoalContext';\nimport GoalFilters from '../components/goals/GoalFilters';\nimport CreateGoalModal from '../components/goals/CreateGoalModal';\nimport EditGoalModal from '../components/goals/EditGoalModal';\nimport { Plus, Search, Calendar, Target, Edit } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Goals = () => {\n  _s();\n  var _kanbanGoals$notStar, _kanbanGoals$inProgr, _kanbanGoals$complete, _kanbanGoals$paused, _kanbanGoals$cancelle;\n  const [searchParams, setSearchParams] = useSearchParams();\n  const {\n    goals,\n    loading,\n    filters,\n    fetchGoals,\n    setFilters,\n    updateGoal\n  } = useGoals();\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [selectedGoal, setSelectedGoal] = useState(null);\n  const [searchTerm, setSearchTerm] = useState(filters.search || '');\n  const [kanbanGoals, setKanbanGoals] = useState({\n    'not-started': [],\n    'in-progress': [],\n    'completed': [],\n    'paused': [],\n    'cancelled': []\n  });\n\n  // Define column configuration\n  const columns = [{\n    id: 'not-started',\n    title: 'Not Started',\n    color: 'bg-gray-100 border-gray-300',\n    headerColor: 'bg-gray-50',\n    count: ((_kanbanGoals$notStar = kanbanGoals['not-started']) === null || _kanbanGoals$notStar === void 0 ? void 0 : _kanbanGoals$notStar.length) || 0\n  }, {\n    id: 'in-progress',\n    title: 'In Progress',\n    color: 'bg-blue-50 border-blue-200',\n    headerColor: 'bg-blue-100',\n    count: ((_kanbanGoals$inProgr = kanbanGoals['in-progress']) === null || _kanbanGoals$inProgr === void 0 ? void 0 : _kanbanGoals$inProgr.length) || 0\n  }, {\n    id: 'completed',\n    title: 'Completed',\n    color: 'bg-green-50 border-green-200',\n    headerColor: 'bg-green-100',\n    count: ((_kanbanGoals$complete = kanbanGoals['completed']) === null || _kanbanGoals$complete === void 0 ? void 0 : _kanbanGoals$complete.length) || 0\n  }, {\n    id: 'paused',\n    title: 'Paused',\n    color: 'bg-yellow-50 border-yellow-200',\n    headerColor: 'bg-yellow-100',\n    count: ((_kanbanGoals$paused = kanbanGoals['paused']) === null || _kanbanGoals$paused === void 0 ? void 0 : _kanbanGoals$paused.length) || 0\n  }, {\n    id: 'cancelled',\n    title: 'Cancelled',\n    color: 'bg-red-50 border-red-200',\n    headerColor: 'bg-red-100',\n    count: ((_kanbanGoals$cancelle = kanbanGoals['cancelled']) === null || _kanbanGoals$cancelle === void 0 ? void 0 : _kanbanGoals$cancelle.length) || 0\n  }];\n\n  // Check if we should show create modal from URL params\n  useEffect(() => {\n    if (searchParams.get('new') === 'true') {\n      setShowCreateModal(true);\n      // Remove the 'new' param from URL\n      searchParams.delete('new');\n      setSearchParams(searchParams);\n    }\n  }, [searchParams, setSearchParams]);\n\n  // Fetch goals when filters change\n  useEffect(() => {\n    fetchGoals(1);\n  }, [fetchGoals, filters]);\n  // Organize goals into kanban columns\n  useEffect(() => {\n    const organized = {\n      'not-started': [],\n      'in-progress': [],\n      'completed': [],\n      'paused': [],\n      'cancelled': []\n    };\n    if (goals && goals.length > 0) {\n      goals.forEach(goal => {\n        const status = goal.status || 'not-started';\n        if (organized[status]) {\n          organized[status].push(goal);\n        }\n      });\n    }\n    setKanbanGoals(organized);\n  }, [goals]);\n  const handleFilterChange = newFilters => {\n    setFilters(newFilters);\n  };\n  const handleSearch = e => {\n    e.preventDefault();\n    setFilters({\n      ...filters,\n      search: searchTerm\n    });\n  };\n  const handleGoalCreated = () => {\n    setShowCreateModal(false);\n    fetchGoals(1); // Refresh goals list\n  };\n  const handleGoalUpdated = () => {\n    setShowEditModal(false);\n    setSelectedGoal(null);\n    fetchGoals(1); // Refresh goals list\n  };\n  const handleEditGoal = (goal, e) => {\n    e.stopPropagation(); // Prevent drag from starting\n    setSelectedGoal(goal);\n    setShowEditModal(true);\n  }; // Handle drag end\n  const handleDragEnd = async result => {\n    const {\n      destination,\n      source,\n      draggableId\n    } = result;\n\n    // If dropped outside a droppable area\n    if (!destination) {\n      return;\n    }\n\n    // If dropped in the same position\n    if (destination.droppableId === source.droppableId && destination.index === source.index) {\n      return;\n    }\n\n    // Find the goal being moved\n    const goalId = draggableId;\n    const goal = goals.find(g => g._id.toString() === goalId);\n    if (!goal) {\n      return;\n    }\n\n    // Update goal status\n    const newStatus = destination.droppableId;\n    const updatedGoal = {\n      ...goal,\n      status: newStatus\n    };\n\n    // Optimistically update local state\n    const newKanbanGoals = {\n      ...kanbanGoals\n    };\n\n    // Remove from source column\n    newKanbanGoals[source.droppableId] = newKanbanGoals[source.droppableId].filter(g => g._id.toString() !== goalId);\n\n    // Add to destination column\n    newKanbanGoals[destination.droppableId].splice(destination.index, 0, updatedGoal);\n    setKanbanGoals(newKanbanGoals);\n\n    // Update goal on server\n    try {\n      await updateGoal(goalId, {\n        status: newStatus\n      });\n    } catch (error) {\n      console.error('Failed to update goal status:', error);\n      // Revert optimistic update on error\n      setKanbanGoals(kanbanGoals);\n    }\n  }; // Goal Card Component for Kanban\n  const KanbanGoalCard = ({\n    goal,\n    index\n  }) => /*#__PURE__*/_jsxDEV(Draggable, {\n    draggableId: goal._id.toString(),\n    index: index,\n    children: (provided, snapshot) => /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: provided.innerRef,\n      ...provided.draggableProps,\n      ...provided.dragHandleProps,\n      className: `group p-4 mb-3 bg-white rounded-lg shadow-sm border border-gray-200 transform transition-transform select-none relative ${snapshot.isDragging ? 'rotate-2 shadow-lg scale-105 z-50 cursor-grabbing' : 'hover:shadow-md cursor-grab'}`,\n      style: {\n        ...provided.draggableProps.style\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => handleEditGoal(goal, e),\n        className: \"absolute top-2 right-2 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors opacity-0 group-hover:opacity-100\",\n        style: {\n          // Override drag handle on this button\n          ...(provided.dragHandleProps ? {} : {}),\n          cursor: 'pointer'\n        },\n        onMouseDown: e => e.stopPropagation(),\n        onTouchStart: e => e.stopPropagation(),\n        children: /*#__PURE__*/_jsxDEV(Edit, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-start justify-between mb-2 pr-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold text-gray-900 text-sm line-clamp-2\",\n          children: goal.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `px-2 py-1 text-xs rounded-full ${goal.priority === 'high' ? 'bg-red-100 text-red-800' : goal.priority === 'medium' ? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'}`,\n          children: goal.priority\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 11\n      }, this), goal.description && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 text-xs mb-3 line-clamp-2\",\n        children: goal.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between text-xs text-gray-500\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(Target, {\n              className: \"w-3 h-3 mr-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"capitalize\",\n              children: goal.category\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 15\n          }, this), goal.targetDate && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(Calendar, {\n              className: \"w-3 h-3 mr-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: new Date(goal.targetDate).toLocaleDateString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }, this), goal.progress !== undefined && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between text-xs text-gray-600 mb-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Progress\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [goal.progress, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full bg-gray-200 rounded-full h-1.5\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-primary-600 h-1.5 rounded-full transition-all duration-300\",\n            style: {\n              width: `${goal.progress}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 41\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 181,\n    columnNumber: 5\n  }, this);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center h-64\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col sm:flex-row sm:items-center sm:justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold text-gray-900\",\n          children: \"Goals\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-1 text-sm text-gray-500\",\n          children: \"Manage your goals with drag-and-drop kanban board\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowCreateModal(true),\n        className: \"mt-3 sm:mt-0 btn-primary\",\n        children: [/*#__PURE__*/_jsxDEV(Plus, {\n          className: \"w-4 h-4 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this), \"New Goal\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }, this), \"      \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col sm:flex-row gap-4 items-start sm:items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full sm:w-96 max-w-md\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSearch,\n          className: \"relative\",\n          children: [/*#__PURE__*/_jsxDEV(Search, {\n            className: \"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Search goals...\",\n            value: searchTerm,\n            onChange: e => setSearchTerm(e.target.value),\n            className: \"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full sm:flex-1 sm:max-w-md\",\n        children: /*#__PURE__*/_jsxDEV(GoalFilters, {\n          filters: filters,\n          onFilterChange: handleFilterChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DragDropContext, {\n      onDragEnd: handleDragEnd,\n      onDragStart: start => console.log('Drag started:', start),\n      onDragUpdate: update => console.log('Drag update:', update),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4\",\n        children: columns.map(column => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `rounded-lg border-2 ${column.color} min-h-96`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `p-4 ${column.headerColor} rounded-t-lg border-b border-gray-200`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-semibold text-gray-900 text-sm\",\n                children: column.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"bg-white px-2 py-1 rounded-full text-xs font-medium text-gray-600\",\n                children: column.count\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Droppable, {\n            droppableId: column.id,\n            type: \"GOAL\",\n            children: (provided, snapshot) => {\n              var _kanbanGoals$column$i, _kanbanGoals$column$i2;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: provided.innerRef,\n                ...provided.droppableProps,\n                className: `p-4 min-h-80 transition-colors ${snapshot.isDraggingOver ? 'bg-blue-50 bg-opacity-50' : ''}`,\n                children: [(_kanbanGoals$column$i = kanbanGoals[column.id]) === null || _kanbanGoals$column$i === void 0 ? void 0 : _kanbanGoals$column$i.map((goal, index) => /*#__PURE__*/_jsxDEV(KanbanGoalCard, {\n                  goal: goal,\n                  index: index\n                }, goal._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 341,\n                  columnNumber: 23\n                }, this)), provided.placeholder, ((_kanbanGoals$column$i2 = kanbanGoals[column.id]) === null || _kanbanGoals$column$i2 === void 0 ? void 0 : _kanbanGoals$column$i2.length) === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-center text-gray-400 py-8\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-4xl mb-2\",\n                    children: \"\\uD83D\\uDCCB\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 351,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm\",\n                    children: \"No goals yet\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 352,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 19\n              }, this);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 15\n          }, this)]\n        }, column.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 7\n    }, this), \"      \", showCreateModal && /*#__PURE__*/_jsxDEV(CreateGoalModal, {\n      isOpen: showCreateModal,\n      onClose: () => setShowCreateModal(false),\n      onGoalCreated: handleGoalCreated\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 9\n    }, this), showEditModal && selectedGoal && /*#__PURE__*/_jsxDEV(EditGoalModal, {\n      isOpen: showEditModal,\n      onClose: () => {\n        setShowEditModal(false);\n        setSelectedGoal(null);\n      },\n      goal: selectedGoal,\n      onGoalUpdated: handleGoalUpdated\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 273,\n    columnNumber: 5\n  }, this);\n};\n_s(Goals, \"sYHPmWeRDMDn6Rry7h8ATEHSfyk=\", false, function () {\n  return [useSearchParams, useGoals];\n});\n_c = Goals;\nexport default Goals;\nvar _c;\n$RefreshReg$(_c, \"Goals\");","map":{"version":3,"names":["React","useEffect","useState","DragDropContext","Droppable","Draggable","useSearchParams","useGoals","GoalFilters","CreateGoalModal","EditGoalModal","Plus","Search","Calendar","Target","Edit","jsxDEV","_jsxDEV","Goals","_s","_kanbanGoals$notStar","_kanbanGoals$inProgr","_kanbanGoals$complete","_kanbanGoals$paused","_kanbanGoals$cancelle","searchParams","setSearchParams","goals","loading","filters","fetchGoals","setFilters","updateGoal","showCreateModal","setShowCreateModal","showEditModal","setShowEditModal","selectedGoal","setSelectedGoal","searchTerm","setSearchTerm","search","kanbanGoals","setKanbanGoals","columns","id","title","color","headerColor","count","length","get","delete","organized","forEach","goal","status","push","handleFilterChange","newFilters","handleSearch","e","preventDefault","handleGoalCreated","handleGoalUpdated","handleEditGoal","stopPropagation","handleDragEnd","result","destination","source","draggableId","droppableId","index","goalId","find","g","_id","toString","newStatus","updatedGoal","newKanbanGoals","filter","splice","error","console","KanbanGoalCard","children","provided","snapshot","ref","innerRef","draggableProps","dragHandleProps","className","isDragging","style","onClick","cursor","onMouseDown","onTouchStart","fileName","_jsxFileName","lineNumber","columnNumber","priority","description","category","targetDate","Date","toLocaleDateString","progress","undefined","width","onSubmit","type","placeholder","value","onChange","target","onFilterChange","onDragEnd","onDragStart","start","log","onDragUpdate","update","map","column","_kanbanGoals$column$i","_kanbanGoals$column$i2","droppableProps","isDraggingOver","isOpen","onClose","onGoalCreated","onGoalUpdated","_c","$RefreshReg$"],"sources":["C:/Users/ADITYA/Desktop/React/goal-tracker-app/client/src/pages/Goals.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { DragDropContext, Droppable, Draggable } from '@hello-pangea/dnd';\r\nimport { useSearchParams } from 'react-router-dom';\r\nimport { useGoals } from '../contexts/GoalContext';\r\nimport GoalFilters from '../components/goals/GoalFilters';\r\nimport CreateGoalModal from '../components/goals/CreateGoalModal';\r\nimport EditGoalModal from '../components/goals/EditGoalModal';\r\nimport { Plus, Search, Calendar, Target, Edit } from 'lucide-react';\r\n\r\nconst Goals = () => {\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const {\r\n    goals,\r\n    loading,\r\n    filters,\r\n    fetchGoals,\r\n    setFilters,\r\n    updateGoal\r\n  } = useGoals();\r\n  const [showCreateModal, setShowCreateModal] = useState(false);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n  const [selectedGoal, setSelectedGoal] = useState(null);\r\n  const [searchTerm, setSearchTerm] = useState(filters.search || '');\r\n  const [kanbanGoals, setKanbanGoals] = useState({\r\n    'not-started': [],\r\n    'in-progress': [],\r\n    'completed': [],\r\n    'paused': [],\r\n    'cancelled': []\r\n  });\r\n\r\n  // Define column configuration\r\n  const columns = [\r\n    {\r\n      id: 'not-started',\r\n      title: 'Not Started',\r\n      color: 'bg-gray-100 border-gray-300',\r\n      headerColor: 'bg-gray-50',\r\n      count: kanbanGoals['not-started']?.length || 0\r\n    },\r\n    {\r\n      id: 'in-progress',\r\n      title: 'In Progress',\r\n      color: 'bg-blue-50 border-blue-200',\r\n      headerColor: 'bg-blue-100',\r\n      count: kanbanGoals['in-progress']?.length || 0\r\n    },\r\n    {\r\n      id: 'completed',\r\n      title: 'Completed',\r\n      color: 'bg-green-50 border-green-200',\r\n      headerColor: 'bg-green-100',\r\n      count: kanbanGoals['completed']?.length || 0\r\n    },\r\n    {\r\n      id: 'paused',\r\n      title: 'Paused',\r\n      color: 'bg-yellow-50 border-yellow-200',\r\n      headerColor: 'bg-yellow-100',\r\n      count: kanbanGoals['paused']?.length || 0\r\n    },\r\n    {\r\n      id: 'cancelled',\r\n      title: 'Cancelled',\r\n      color: 'bg-red-50 border-red-200',\r\n      headerColor: 'bg-red-100',\r\n      count: kanbanGoals['cancelled']?.length || 0\r\n    }\r\n  ];\r\n\r\n  // Check if we should show create modal from URL params\r\n  useEffect(() => {\r\n    if (searchParams.get('new') === 'true') {\r\n      setShowCreateModal(true);\r\n      // Remove the 'new' param from URL\r\n      searchParams.delete('new');\r\n      setSearchParams(searchParams);\r\n    }\r\n  }, [searchParams, setSearchParams]);\r\n\r\n  // Fetch goals when filters change\r\n  useEffect(() => {\r\n    fetchGoals(1);\r\n  }, [fetchGoals, filters]);\r\n  // Organize goals into kanban columns\r\n  useEffect(() => {\r\n    const organized = {\r\n      'not-started': [],\r\n      'in-progress': [],\r\n      'completed': [],\r\n      'paused': [],\r\n      'cancelled': []\r\n    };\r\n\r\n    if (goals && goals.length > 0) {\r\n      goals.forEach(goal => {\r\n        const status = goal.status || 'not-started';\r\n        if (organized[status]) {\r\n          organized[status].push(goal);\r\n        }\r\n      });\r\n    }\r\n\r\n    setKanbanGoals(organized);\r\n  }, [goals]);\r\n\r\n  const handleFilterChange = (newFilters) => {\r\n    setFilters(newFilters);\r\n  };\r\n  const handleSearch = (e) => {\r\n    e.preventDefault();\r\n    setFilters({ ...filters, search: searchTerm });\r\n  };\r\n  const handleGoalCreated = () => {\r\n    setShowCreateModal(false);\r\n    fetchGoals(1); // Refresh goals list\r\n  };\r\n\r\n  const handleGoalUpdated = () => {\r\n    setShowEditModal(false);\r\n    setSelectedGoal(null);\r\n    fetchGoals(1); // Refresh goals list\r\n  };\r\n\r\n  const handleEditGoal = (goal, e) => {\r\n    e.stopPropagation(); // Prevent drag from starting\r\n    setSelectedGoal(goal);\r\n    setShowEditModal(true);\r\n  };  // Handle drag end\r\n  const handleDragEnd = async (result) => {\r\n    const { destination, source, draggableId } = result;\r\n\r\n    // If dropped outside a droppable area\r\n    if (!destination) {\r\n      return;\r\n    }\r\n\r\n    // If dropped in the same position\r\n    if (\r\n      destination.droppableId === source.droppableId &&\r\n      destination.index === source.index\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    // Find the goal being moved\r\n    const goalId = draggableId;\r\n    const goal = goals.find(g => g._id.toString() === goalId);\r\n\r\n    if (!goal) {\r\n      return;\r\n    }\r\n\r\n    // Update goal status\r\n    const newStatus = destination.droppableId;\r\n    const updatedGoal = { ...goal, status: newStatus };\r\n\r\n    // Optimistically update local state\r\n    const newKanbanGoals = { ...kanbanGoals };\r\n    \r\n    // Remove from source column\r\n    newKanbanGoals[source.droppableId] = newKanbanGoals[source.droppableId].filter(\r\n      g => g._id.toString() !== goalId\r\n    );\r\n    \r\n    // Add to destination column\r\n    newKanbanGoals[destination.droppableId].splice(destination.index, 0, updatedGoal);\r\n    \r\n    setKanbanGoals(newKanbanGoals);\r\n\r\n    // Update goal on server\r\n    try {\r\n      await updateGoal(goalId, { status: newStatus });\r\n    } catch (error) {\r\n      console.error('Failed to update goal status:', error);\r\n      // Revert optimistic update on error\r\n      setKanbanGoals(kanbanGoals);\r\n    }\r\n  };  // Goal Card Component for Kanban\r\n  const KanbanGoalCard = ({ goal, index }) => (\r\n    <Draggable draggableId={goal._id.toString()} index={index}>\r\n      {(provided, snapshot) => (        <div\r\n          ref={provided.innerRef}\r\n          {...provided.draggableProps}\r\n          {...provided.dragHandleProps}\r\n          className={`group p-4 mb-3 bg-white rounded-lg shadow-sm border border-gray-200 transform transition-transform select-none relative ${\r\n            snapshot.isDragging \r\n              ? 'rotate-2 shadow-lg scale-105 z-50 cursor-grabbing' \r\n              : 'hover:shadow-md cursor-grab'\r\n          }`}\r\n          style={{\r\n            ...provided.draggableProps.style,\r\n          }}\r\n        >\r\n          {/* Edit Button */}\r\n          <button\r\n            onClick={(e) => handleEditGoal(goal, e)}\r\n            className=\"absolute top-2 right-2 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors opacity-0 group-hover:opacity-100\"\r\n            style={{ \r\n              // Override drag handle on this button\r\n              ...(provided.dragHandleProps ? {} : {}),\r\n              cursor: 'pointer'\r\n            }}\r\n            onMouseDown={(e) => e.stopPropagation()}\r\n            onTouchStart={(e) => e.stopPropagation()}\r\n          >\r\n            <Edit className=\"w-4 h-4\" />\r\n          </button>\r\n\r\n          <div className=\"flex items-start justify-between mb-2 pr-6\">\r\n            <h3 className=\"font-semibold text-gray-900 text-sm line-clamp-2\">\r\n              {goal.title}\r\n            </h3>\r\n            <span className={`px-2 py-1 text-xs rounded-full ${\r\n              goal.priority === 'high' ? 'bg-red-100 text-red-800' :\r\n              goal.priority === 'medium' ? 'bg-yellow-100 text-yellow-800' :\r\n              'bg-green-100 text-green-800'\r\n            }`}>\r\n              {goal.priority}\r\n            </span>\r\n          </div>\r\n          \r\n          {goal.description && (\r\n            <p className=\"text-gray-600 text-xs mb-3 line-clamp-2\">\r\n              {goal.description}\r\n            </p>\r\n          )}\r\n\r\n          <div className=\"flex items-center justify-between text-xs text-gray-500\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <div className=\"flex items-center\">\r\n                <Target className=\"w-3 h-3 mr-1\" />\r\n                <span className=\"capitalize\">{goal.category}</span>\r\n              </div>\r\n              \r\n              {goal.targetDate && (\r\n                <div className=\"flex items-center\">\r\n                  <Calendar className=\"w-3 h-3 mr-1\" />\r\n                  <span>{new Date(goal.targetDate).toLocaleDateString()}</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {goal.progress !== undefined && (\r\n            <div className=\"mt-2\">\r\n              <div className=\"flex justify-between text-xs text-gray-600 mb-1\">\r\n                <span>Progress</span>\r\n                <span>{goal.progress}%</span>\r\n              </div>\r\n              <div className=\"w-full bg-gray-200 rounded-full h-1.5\">\r\n                <div\r\n                  className=\"bg-primary-600 h-1.5 rounded-full transition-all duration-300\"\r\n                  style={{ width: `${goal.progress}%` }}\r\n                ></div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </Draggable>\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-gray-900\">Goals</h1>\r\n          <p className=\"mt-1 text-sm text-gray-500\">\r\n            Manage your goals with drag-and-drop kanban board\r\n          </p>\r\n        </div>\r\n        <button\r\n          onClick={() => setShowCreateModal(true)}\r\n          className=\"mt-3 sm:mt-0 btn-primary\"\r\n        >\r\n          <Plus className=\"w-4 h-4 mr-2\" />\r\n          New Goal\r\n        </button>\r\n      </div>      {/* Search and Filters */}\r\n      <div className=\"flex flex-col sm:flex-row gap-4 items-start sm:items-center\">\r\n        <div className=\"w-full sm:w-96 max-w-md\">\r\n          <form onSubmit={handleSearch} className=\"relative\">\r\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search goals...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n            />\r\n          </form>\r\n        </div>\r\n        <div className=\"w-full sm:flex-1 sm:max-w-md\">\r\n          <GoalFilters\r\n            filters={filters}\r\n            onFilterChange={handleFilterChange}\r\n          />\r\n        </div>\r\n      </div>{/* Kanban Board */}\r\n      <DragDropContext \r\n        onDragEnd={handleDragEnd}\r\n        onDragStart={(start) => console.log('Drag started:', start)}\r\n        onDragUpdate={(update) => console.log('Drag update:', update)}\r\n      >\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4\">\r\n          {columns.map((column) => (\r\n            <div key={column.id} className={`rounded-lg border-2 ${column.color} min-h-96`}>\r\n              {/* Column Header */}\r\n              <div className={`p-4 ${column.headerColor} rounded-t-lg border-b border-gray-200`}>\r\n                <div className=\"flex items-center justify-between\">\r\n                  <h3 className=\"font-semibold text-gray-900 text-sm\">\r\n                    {column.title}\r\n                  </h3>\r\n                  <span className=\"bg-white px-2 py-1 rounded-full text-xs font-medium text-gray-600\">\r\n                    {column.count}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Column Content */}\r\n              <Droppable droppableId={column.id} type=\"GOAL\">\r\n                {(provided, snapshot) => (\r\n                  <div\r\n                    ref={provided.innerRef}\r\n                    {...provided.droppableProps}\r\n                    className={`p-4 min-h-80 transition-colors ${\r\n                      snapshot.isDraggingOver ? 'bg-blue-50 bg-opacity-50' : ''\r\n                    }`}\r\n                  >\r\n                    {kanbanGoals[column.id]?.map((goal, index) => (\r\n                      <KanbanGoalCard\r\n                        key={goal._id}\r\n                        goal={goal}\r\n                        index={index}\r\n                      />\r\n                    ))}\r\n                    {provided.placeholder}\r\n                    \r\n                    {kanbanGoals[column.id]?.length === 0 && (\r\n                      <div className=\"text-center text-gray-400 py-8\">\r\n                        <div className=\"text-4xl mb-2\">📋</div>\r\n                        <p className=\"text-sm\">No goals yet</p>\r\n                      </div>\r\n                    )}\r\n                  </div>                )}\r\n              </Droppable>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </DragDropContext>      {/* Create Goal Modal */}\r\n      {showCreateModal && (\r\n        <CreateGoalModal\r\n          isOpen={showCreateModal}\r\n          onClose={() => setShowCreateModal(false)}\r\n          onGoalCreated={handleGoalCreated}\r\n        />\r\n      )}\r\n\r\n      {/* Edit Goal Modal */}\r\n      {showEditModal && selectedGoal && (\r\n        <EditGoalModal\r\n          isOpen={showEditModal}\r\n          onClose={() => {\r\n            setShowEditModal(false);\r\n            setSelectedGoal(null);\r\n          }}\r\n          goal={selectedGoal}\r\n          onGoalUpdated={handleGoalUpdated}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Goals;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}