{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ADITYA\\\\Desktop\\\\React\\\\goal-tracker-app\\\\client\\\\src\\\\contexts\\\\AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport { authAPI } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nconst authReducer = (state, action) => {\n  switch (action.type) {\n    case 'LOGIN_START':\n      return {\n        ...state,\n        loading: true,\n        error: null\n      };\n    case 'LOGIN_SUCCESS':\n      return {\n        ...state,\n        loading: false,\n        isAuthenticated: true,\n        user: action.payload.user,\n        token: action.payload.token,\n        error: null\n      };\n    case 'LOGIN_ERROR':\n      return {\n        ...state,\n        loading: false,\n        isAuthenticated: false,\n        user: null,\n        token: null,\n        error: action.payload\n      };\n    case 'LOGOUT':\n      return {\n        ...state,\n        isAuthenticated: false,\n        user: null,\n        token: null,\n        error: null\n      };\n    case 'UPDATE_USER':\n      return {\n        ...state,\n        user: action.payload\n      };\n    case 'CLEAR_ERROR':\n      return {\n        ...state,\n        error: null\n      };\n    default:\n      return state;\n  }\n};\nconst initialState = {\n  isAuthenticated: false,\n  user: null,\n  token: null,\n  loading: false,\n  error: null\n};\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [state, dispatch] = useReducer(authReducer, initialState);\n\n  // Check for existing token on app load\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const user = localStorage.getItem('user');\n    if (token && user) {\n      dispatch({\n        type: 'LOGIN_SUCCESS',\n        payload: {\n          token,\n          user: JSON.parse(user)\n        }\n      });\n    }\n  }, []);\n\n  // Login function\n  const login = async credentials => {\n    try {\n      dispatch({\n        type: 'LOGIN_START'\n      });\n      const response = await authAPI.login(credentials);\n      const {\n        token,\n        user\n      } = response.data;\n      localStorage.setItem('token', token);\n      localStorage.setItem('user', JSON.stringify(user));\n      dispatch({\n        type: 'LOGIN_SUCCESS',\n        payload: {\n          token,\n          user\n        }\n      });\n      return {\n        success: true\n      };\n    } catch (error) {\n      var _error$response, _error$response$data;\n      const errorMessage = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Login failed';\n      dispatch({\n        type: 'LOGIN_ERROR',\n        payload: errorMessage\n      });\n      return {\n        success: false,\n        error: errorMessage\n      };\n    }\n  };\n\n  // Register function\n  const register = async userData => {\n    try {\n      dispatch({\n        type: 'LOGIN_START'\n      });\n      const response = await authAPI.register(userData);\n      const {\n        token,\n        user\n      } = response.data;\n      localStorage.setItem('token', token);\n      localStorage.setItem('user', JSON.stringify(user));\n      dispatch({\n        type: 'LOGIN_SUCCESS',\n        payload: {\n          token,\n          user\n        }\n      });\n      return {\n        success: true\n      };\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      const errorMessage = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Registration failed';\n      dispatch({\n        type: 'LOGIN_ERROR',\n        payload: errorMessage\n      });\n      return {\n        success: false,\n        error: errorMessage\n      };\n    }\n  };\n\n  // Logout function\n  const logout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    dispatch({\n      type: 'LOGOUT'\n    });\n  };\n\n  // Update user profile\n  const updateUser = userData => {\n    const updatedUser = {\n      ...state.user,\n      ...userData\n    };\n    localStorage.setItem('user', JSON.stringify(updatedUser));\n    dispatch({\n      type: 'UPDATE_USER',\n      payload: updatedUser\n    });\n  };\n\n  // Clear error\n  const clearError = () => {\n    dispatch({\n      type: 'CLEAR_ERROR'\n    });\n  };\n  const value = {\n    ...state,\n    login,\n    register,\n    logout,\n    updateUser,\n    clearError\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 152,\n    columnNumber: 9\n  }, this);\n};\n_s(AuthProvider, \"bgCdjuTOmPdSBRwTap80EFd9Y3U=\");\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n_s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport default AuthContext;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","authAPI","jsxDEV","_jsxDEV","AuthContext","authReducer","state","action","type","loading","error","isAuthenticated","user","payload","token","initialState","AuthProvider","children","_s","dispatch","localStorage","getItem","JSON","parse","login","credentials","response","data","setItem","stringify","success","_error$response","_error$response$data","errorMessage","message","register","userData","_error$response2","_error$response2$data","logout","removeItem","updateUser","updatedUser","clearError","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","context","Error","$RefreshReg$"],"sources":["C:/Users/ADITYA/Desktop/React/goal-tracker-app/client/src/contexts/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect } from 'react';\r\nimport { authAPI } from '../services/api';\r\n\r\nconst AuthContext = createContext();\r\n\r\nconst authReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case 'LOGIN_START':\r\n            return { ...state, loading: true, error: null };\r\n        case 'LOGIN_SUCCESS':\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                isAuthenticated: true,\r\n                user: action.payload.user,\r\n                token: action.payload.token,\r\n                error: null\r\n            };\r\n        case 'LOGIN_ERROR':\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                isAuthenticated: false,\r\n                user: null,\r\n                token: null,\r\n                error: action.payload\r\n            };\r\n        case 'LOGOUT':\r\n            return {\r\n                ...state,\r\n                isAuthenticated: false,\r\n                user: null,\r\n                token: null,\r\n                error: null\r\n            };\r\n        case 'UPDATE_USER':\r\n            return { ...state, user: action.payload };\r\n        case 'CLEAR_ERROR':\r\n            return { ...state, error: null };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nconst initialState = {\r\n    isAuthenticated: false,\r\n    user: null,\r\n    token: null,\r\n    loading: false,\r\n    error: null,\r\n};\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [state, dispatch] = useReducer(authReducer, initialState);\r\n\r\n    // Check for existing token on app load\r\n    useEffect(() => {\r\n        const token = localStorage.getItem('token');\r\n        const user = localStorage.getItem('user');\r\n\r\n        if (token && user) {\r\n            dispatch({\r\n                type: 'LOGIN_SUCCESS',\r\n                payload: { token, user: JSON.parse(user) }\r\n            });\r\n        }\r\n    }, []);\r\n\r\n    // Login function\r\n    const login = async (credentials) => {\r\n        try {\r\n            dispatch({ type: 'LOGIN_START' });\r\n\r\n            const response = await authAPI.login(credentials);\r\n            const { token, user } = response.data;\r\n\r\n            localStorage.setItem('token', token);\r\n            localStorage.setItem('user', JSON.stringify(user));\r\n\r\n            dispatch({\r\n                type: 'LOGIN_SUCCESS',\r\n                payload: { token, user }\r\n            });\r\n\r\n            return { success: true };\r\n        } catch (error) {\r\n            const errorMessage = error.response?.data?.message || 'Login failed';\r\n            dispatch({\r\n                type: 'LOGIN_ERROR',\r\n                payload: errorMessage\r\n            });\r\n            return { success: false, error: errorMessage };\r\n        }\r\n    };\r\n\r\n    // Register function\r\n    const register = async (userData) => {\r\n        try {\r\n            dispatch({ type: 'LOGIN_START' });\r\n\r\n            const response = await authAPI.register(userData);\r\n            const { token, user } = response.data;\r\n\r\n            localStorage.setItem('token', token);\r\n            localStorage.setItem('user', JSON.stringify(user));\r\n\r\n            dispatch({\r\n                type: 'LOGIN_SUCCESS',\r\n                payload: { token, user }\r\n            });\r\n\r\n            return { success: true };\r\n        } catch (error) {\r\n            const errorMessage = error.response?.data?.message || 'Registration failed';\r\n            dispatch({\r\n                type: 'LOGIN_ERROR',\r\n                payload: errorMessage\r\n            });\r\n            return { success: false, error: errorMessage };\r\n        }\r\n    };\r\n\r\n    // Logout function\r\n    const logout = () => {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('user');\r\n        dispatch({ type: 'LOGOUT' });\r\n    };\r\n\r\n    // Update user profile\r\n    const updateUser = (userData) => {\r\n        const updatedUser = { ...state.user, ...userData };\r\n        localStorage.setItem('user', JSON.stringify(updatedUser));\r\n        dispatch({ type: 'UPDATE_USER', payload: updatedUser });\r\n    };\r\n\r\n    // Clear error\r\n    const clearError = () => {\r\n        dispatch({ type: 'CLEAR_ERROR' });\r\n    };\r\n\r\n    const value = {\r\n        ...state,\r\n        login,\r\n        register,\r\n        logout,\r\n        updateUser,\r\n        clearError,\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={value}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useAuth = () => {\r\n    const context = useContext(AuthContext);\r\n    if (!context) {\r\n        throw new Error('useAuth must be used within an AuthProvider');\r\n    }\r\n    return context;\r\n};\r\n\r\nexport default AuthContext;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}